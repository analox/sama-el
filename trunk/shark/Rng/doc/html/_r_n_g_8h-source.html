<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Rng: RNG.h Source File</title>
<link href="Rng.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>RNG.h</h1><a href="_r_n_g_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//===========================================================================</span>
<a name="l00064"></a>00064 <span class="comment"></span><span class="comment">//===========================================================================</span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="preprocessor">#ifndef __RNG_H</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#define __RNG_H</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;ctime&gt;</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">//===========================================================================</span>
<a name="l00150"></a><a class="code" href="class_r_n_g.html">00150</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_r_n_g.html">RNG</a>
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152   <span class="keyword">public</span>:
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="class_r_n_g.html#40fcbde5dc26467639c26afef1b30f4e">00154</a>   <span class="keyword">virtual</span> <a class="code" href="class_r_n_g.html#40fcbde5dc26467639c26afef1b30f4e">~RNG</a>() {};
<a name="l00155"></a>00155 
<a name="l00156"></a>00156    <span class="comment">//========================================================================</span>
<a name="l00179"></a><a class="code" href="class_r_n_g.html#0f2a6f9ea7131708eacf43e7a9327f85">00179</a> <span class="comment"></span>    <a class="code" href="class_r_n_g.html#0f2a6f9ea7131708eacf43e7a9327f85">RNG</a>( <span class="keywordtype">long</span> s = 1 ) { <a class="code" href="class_r_n_g.html#505ddfad12cc7237d5c97313675c6894">seed</a>( s ); }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 
<a name="l00182"></a>00182    <span class="comment">//========================================================================</span>
<a name="l00207"></a><a class="code" href="class_r_n_g.html#505ddfad12cc7237d5c97313675c6894">00207</a> <span class="comment"></span>    <span class="keywordtype">void</span>       <a class="code" href="class_r_n_g.html#505ddfad12cc7237d5c97313675c6894">seed</a>      ( <span class="keywordtype">long</span> s = time( NULL ) )
<a name="l00208"></a>00208                {
<a name="l00209"></a>00209                  <span class="comment">//if( s == 0 ) s = time( NULL );</span>
<a name="l00210"></a>00210                    initialSx = sx = (   s         &amp; 0xff   ) + 1;
<a name="l00211"></a>00211                    initialSy = sy = ( ( s &gt;&gt;  8 ) &amp; 0xff   ) + 10000;
<a name="l00212"></a>00212                    initialSz = sz = ( ( s &gt;&gt; 16 ) &amp; 0xffff ) + 3000;
<a name="l00213"></a>00213                }
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 
<a name="l00216"></a>00216    <span class="comment">//========================================================================</span>
<a name="l00238"></a><a class="code" href="class_r_n_g.html#7f097f26f92aaf33c8d0dd5b5cbfb1ec">00238</a> <span class="comment"></span>    <span class="keywordtype">void</span>       <a class="code" href="class_r_n_g.html#7f097f26f92aaf33c8d0dd5b5cbfb1ec">reset</a>     ()
<a name="l00239"></a>00239                {
<a name="l00240"></a>00240                    sx = initialSx;
<a name="l00241"></a>00241                    sy = initialSy;
<a name="l00242"></a>00242                    sz = initialSz;
<a name="l00243"></a>00243                }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 
<a name="l00246"></a>00246    <span class="comment">//========================================================================</span>
<a name="l00269"></a><a class="code" href="class_r_n_g.html#989c27b884c4206fc68b0c6df8618b19">00269</a> <span class="comment"></span>    <span class="keywordtype">long</span>       <a class="code" href="class_r_n_g.html#989c27b884c4206fc68b0c6df8618b19">genLong</a>   ()
<a name="l00270"></a>00270                {
<a name="l00271"></a>00271                    <span class="keyword">const</span> <span class="keywordtype">long</span> MaxRand = 0x7fffffffL;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                    <span class="keywordflow">return</span> ( <span class="keywordtype">long</span> )( <a class="code" href="class_r_n_g.html#45112050d0d0dc99863c8446b583abf0">genDouble</a>() * ( ( double )MaxRand + 1 ) );
<a name="l00274"></a>00274                }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 
<a name="l00277"></a>00277    <span class="comment">//========================================================================</span>
<a name="l00298"></a><a class="code" href="class_r_n_g.html#45112050d0d0dc99863c8446b583abf0">00298</a> <span class="comment"></span>    <span class="keywordtype">double</span>     <a class="code" href="class_r_n_g.html#45112050d0d0dc99863c8446b583abf0">genDouble</a> ()
<a name="l00299"></a>00299                {
<a name="l00300"></a>00300                    <span class="keywordtype">double</span> rn;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302                    <span class="comment">// the three congruential generators</span>
<a name="l00303"></a>00303                    sx = ( unsigned )( sx * 171UL % 30269UL );
<a name="l00304"></a>00304                    sy = ( unsigned )( sy * 172UL % 30307UL );
<a name="l00305"></a>00305                    sz = ( unsigned )( sz * 170UL % 30323UL );
<a name="l00306"></a>00306 
<a name="l00307"></a>00307                    rn = sx / 30269. + sy / 30307. + sz / 30323.;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309                    <span class="keywordflow">return</span> rn - ( unsigned )rn;
<a name="l00310"></a>00310                }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 
<a name="l00313"></a>00313    <span class="comment">//========================================================================</span>
<a name="l00337"></a><a class="code" href="class_r_n_g.html#929c13af7be848f65ce6148d6ca6b47a">00337</a> <span class="comment"></span>    <span class="keywordtype">void</span>       <a class="code" href="class_r_n_g.html#929c13af7be848f65ce6148d6ca6b47a">getStatus</a> (<span class="keywordtype">unsigned</span> &amp;x, <span class="keywordtype">unsigned</span> &amp;y, <span class="keywordtype">unsigned</span> &amp;z)<span class="keyword"> const </span>
<a name="l00338"></a>00338 <span class="keyword">               </span>{
<a name="l00339"></a>00339                    x = sx; 
<a name="l00340"></a>00340                    y = sy; 
<a name="l00341"></a>00341                    z = sz; 
<a name="l00342"></a>00342                }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a>00345    <span class="comment">//========================================================================</span>
<a name="l00370"></a><a class="code" href="class_r_n_g.html#544e8c996e2cd89d6f41592a6fabdf17">00370</a> <span class="comment"></span>    <span class="keywordtype">void</span>       <a class="code" href="class_r_n_g.html#544e8c996e2cd89d6f41592a6fabdf17">setStatus</a> (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> x, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> y, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> z)
<a name="l00371"></a>00371                {
<a name="l00372"></a>00372                    <span class="comment">// initial state is not restored</span>
<a name="l00373"></a>00373                    sx = x; 
<a name="l00374"></a>00374                    sy = y; 
<a name="l00375"></a>00375                    sz = z; 
<a name="l00376"></a>00376                }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378    <span class="comment">//========================================================================</span>
<a name="l00399"></a><a class="code" href="class_r_n_g.html#8ce7c4f2e4c60a42bde9f819cb49412d">00399</a> <span class="comment"></span>    <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="class_r_n_g.html#8ce7c4f2e4c60a42bde9f819cb49412d">operator()</a>() { <span class="keywordflow">return</span> <a class="code" href="class_r_n_g.html#45112050d0d0dc99863c8446b583abf0">genDouble</a>(); }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 
<a name="l00404"></a><a class="code" href="class_r_n_g.html#c5a1998274bf6dfb72fd50c88ef10fb9">00404</a>     <span class="keyword">static</span> <a class="code" href="class_r_n_g.html">RNG</a> <a class="code" href="class_r_n_g.html#c5a1998274bf6dfb72fd50c88ef10fb9">globalRng</a>;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <span class="keyword">private</span>:
<a name="l00408"></a>00408 
<a name="l00409"></a>00409     <span class="comment">// Seed value for internal generator no. 1.</span>
<a name="l00410"></a>00410     <span class="keywordtype">unsigned</span> initialSx;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="comment">// Seed value for internal generator no. 2.</span>
<a name="l00413"></a>00413     <span class="keywordtype">unsigned</span> initialSy;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="comment">// Seed value for internal generator no. 3.</span>
<a name="l00416"></a>00416     <span class="keywordtype">unsigned</span> initialSz;
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     <span class="comment">// Current value of ni,1 (see description of class).</span>
<a name="l00419"></a>00419     <span class="keywordtype">unsigned</span> sx, 
<a name="l00420"></a>00420 
<a name="l00421"></a>00421     <span class="comment">// Current value of ni,2 (see description of class).</span>
<a name="l00422"></a>00422     sy, 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424     <span class="comment">// Current value of ni,3 (see description of class).</span>
<a name="l00425"></a>00425     sz;
<a name="l00426"></a>00426 };
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 <span class="preprocessor">#endif  </span><span class="comment">/* !__RNG_H */</span>
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 
<a name="l00433"></a>00433 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 16 13:06:31 2009 for Rng by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
