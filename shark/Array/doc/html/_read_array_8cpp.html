<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Array: ReadArray.cpp File Reference</title>
<link href="Array.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>ReadArray.cpp File Reference</h1>Contains functions for reading the content of an array from a given input stream. <a href="#_details">More...</a>
<p>
<code>#include &quot;ZNconfig.h&quot;</code><br>
<code>#include &lt;cmath&gt;</code><br>
<code>#include &lt;iostream&gt;</code><br>
<code>#include &lt;list&gt;</code><br>
<code>#include &lt;algorithm&gt;</code><br>
<code>#include &quot;<a class="el" href="_array_op_8h-source.html">Array/ArrayOp.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="_array_io_8h-source.html">Array/ArrayIo.h</a>&quot;</code><br>

<p>
<a href="_read_array_8cpp-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestd.html">std</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_read_array_8cpp.html#ff3143e51aa23a9e3ea2360ca2051887">readArray</a> (<a class="el" href="class_array.html">Array</a>&lt; double &gt; &amp;arr, istream &amp;is, bool seek, const string beginRecord, const string endRecord, const string beginComment, const string endComment, const string separator, const vector&lt; unsigned &gt; dimensions)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the content for array "arr" from input stream "is".  <a href="#ff3143e51aa23a9e3ea2360ca2051887"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Contains functions for reading the content of an array from a given input stream. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>M. Kreutz </dd></dl>
<dl compact><dt><b>Date:</b></dt><dd>1995-01-01</dd></dl>
<dl compact><dt><b>Copyright (c) 1995, 1999:</b></dt><dd>Institut f&uuml;r Neuroinformatik<br>
 Ruhr-Universit&auml;t Bochum<br>
 D-44780 Bochum, Germany<br>
 Phone: +49-234-32-25558<br>
 Fax: +49-234-32-14209<br>
 eMail: <a href="mailto:Shark-admin@neuroinformatik.ruhr-uni-bochum.de">Shark-admin@neuroinformatik.ruhr-uni-bochum.de</a><br>
 www: <a href="http://www.neuroinformatik.ruhr-uni-bochum.de">http://www.neuroinformatik.ruhr-uni-bochum.de</a><br>
 <br>
</dd></dl>
<dl compact><dt><b>Project:</b></dt><dd><a class="el" href="class_array.html">Array</a></dd></dl>
<dl compact><dt><b>Language and Compiler:</b></dt><dd>C++, egcs (Linux)</dd></dl>
<dl compact><dt><b>File and Revision:</b></dt><dd><dl compact><dt><b>RCSfile</b></dt><dd><a class="el" href="_read_array_8cpp.html">ReadArray.cpp</a>,v </dd></dl>
<br>
 <dl compact><dt><b>Revision</b></dt><dd>2.0 </dd></dl>
<br>
 <dl compact><dt><b>Date</b></dt><dd>2003/11/28 16:23:07 </dd></dl>
</dd></dl>
<dl compact><dt><b>Changes:</b></dt><dd><dl compact><dt><b>Log</b></dt><dd><a class="el" href="_read_array_8cpp.html">ReadArray.cpp</a>,v </dd></dl>
Revision 2.0 2003/11/28 16:23:07 shark-admin Revision tag reset to revision tag 2.x</dd></dl>
Revision 1.1.1.1 2003/11/24 13:37:03 shark-admin INI Administration<p>
Revision 1.7 2002/06/06 15:29:07 rudi doxygen comments added.<p>
This file is part of <a class="el" href="class_array.html">Array</a>. This library is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.<p>
This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.<p>
You should have received a copy of the GNU General Public License along with this library; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA. 
<p>
Definition in file <a class="el" href="_read_array_8cpp-source.html">ReadArray.cpp</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="ff3143e51aa23a9e3ea2360ca2051887"></a><!-- doxytag: member="ReadArray.cpp::readArray" ref="ff3143e51aa23a9e3ea2360ca2051887" args="(Array&lt; double &gt; &amp;arr, istream &amp;is, bool seek, const string beginRecord, const string endRecord, const string beginComment, const string endComment, const string separator, const vector&lt; unsigned &gt; dimensions)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_array.html">Array</a>&lt; double &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">istream &amp;&nbsp;</td>
          <td class="paramname"> <em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>seek</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&nbsp;</td>
          <td class="paramname"> <em>beginRecord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&nbsp;</td>
          <td class="paramname"> <em>endRecord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&nbsp;</td>
          <td class="paramname"> <em>beginComment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&nbsp;</td>
          <td class="paramname"> <em>endComment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string&nbsp;</td>
          <td class="paramname"> <em>separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; unsigned &gt;&nbsp;</td>
          <td class="paramname"> <em>dimensions</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the content for array "arr" from input stream "is". 
<p>
You have several possibilities of reading data from <em>is</em>. <br>
 For all possibilities holds, that you can also use the "values" <img class="formulaInl" alt="$NaN$" src="form_0.png"> (for not a number), <img class="formulaInl" alt="$+Inf$" src="form_1.png"> or <img class="formulaInl" alt="$Inf$" src="form_2.png"> (for positive infinity) and <img class="formulaInl" alt="$-Inf$" src="form_3.png"> (for negative infinity) in your input data. It is also possible to use comments (enclosed in the strings <em>beginComment</em> and <em>endComment</em>) at any position of your data and several separators for the single array values at once (each character in the <em>separator</em> string represents one single separator).<br>
<p>
If the preprocessor flag <a class="el" href="_array_8h.html#1b449ca5a2cad00f9470077796c346fc">__ARRAY_NO_GENERIC_IOSTREAM</a> in file "Array.h" is not defined and you have set <em>seek</em> to "true", you can read data in the following format: <br>
<p>
<a class="el" href="class_array.html">Array</a>&lt;<em>type&gt;</em>( <em>list</em> <em>of</em> <em>dimension</em> <em>sizes</em> ) <br>
 <em>list</em> <em>of</em> <em>all</em> <em>array</em> <em>elements</em> <br>
 Please notice that there are no whitespaces allowed in the list of dimension sizes and between the parentheses and the list, otherwise the method will exit with an exception. <br>
<p>
<dl compact><dt><b>Example</b></dt><dd>From <em>is</em> the following data is read: <br>
 Array&lt;double&gt;(3,2) <br>
 1. 2. 3. 4. 5. 6. <br>
</dd></dl>
So the array <em>arr</em> will be a <img class="formulaInl" alt="$3 \times 2$" src="form_4.png"> array of type "double" with content <img class="formulaInl" alt="$ \left(\begin{array}{ll} 1. &amp; 2.\\ 3. &amp; 4.\\ 5. &amp; 6. \end{array}\right) $" src="form_5.png"><p>
You can also explicitly give the dimension sizes, by using parameter <em>dimensions</em>. In this case you only have to list the single array values: <br>
<p>
<dl compact><dt><b>Example</b></dt><dd><div class="fragment"><pre class="fragment"><span class="preprocessor">  #include "<a class="code" href="_array_io_8h.html">Array/ArrayIo.h</a>"</span>
  
  <span class="keywordtype">void</span> main()
  {
    vector&lt; unsigned &gt; dim_vec;
    <a class="code" href="class_array.html">Array&lt; double &gt;</a> arr;
  
    dim_vec.push_back(3);
    dim_vec.push_back(2);
  
    <a class="code" href="_read_array_8cpp.html#ff3143e51aa23a9e3ea2360ca2051887">readArray</a>( arr, cin, <span class="keyword">true</span>, <span class="stringliteral">""</span>, <span class="stringliteral">"\n"</span>, <span class="stringliteral">";"</span>, <span class="stringliteral">"\n"</span>, <span class="stringliteral">" ,"</span>, dim_vec );
  }
</pre></div></dd></dl>
Given the code above, the data read from the input stream "cin", must be something like: <br>
<p>
<img class="formulaInl" alt="$ \mbox{\ }\\ \noindent \mbox{1.,\ 2.,\ 3.,\ 4.,\ 5.,\ 6.} $" src="form_6.png"><p>
And you will get the same array again. <br>
 If you set the first value of <em>dimension</em> to zero, this functions as wildcard. After the reading of the data, the function will determine the final size of the array by itself. Guess, we will replace the first "push_back"-instruction in the code above by "dim_vec.push_back(0)". Then given <img class="formulaInl" alt="$\mbox{1.,\ 2.,\ 3.,\ 4.,\ 5.,\ 6.}$" src="form_7.png"> as input again, we will get the same array as in the two previous examples.<br>
<p>
If you use neither the specification of the array type and dimensions in the input data nor the specification of the dimensions in the function call, all input is interpreted as unformatted. <br>
 You must then use the <em>beginRecord</em> and <em>endRecord</em> strings to mark the several dimensions of the array data. If you use the default strings (no <em>beginRecord</em> string and a newline as <em>endRecord</em> string), it is obvious that you can only read in data for one-dimensional arrays (one line of values ended by a newline character) or 2-dimensional arrays (each line contains the values for one array row). <br>
 If you want to read in data for arrays with 3 or more dimensions, then you have to use a nonempty <em>beginRecord</em> string. <br>
 Guess, we have set the <em>beginRecord</em> string to "\f$(\f$" and the <em>endRecord</em> string to "\f$)\f$". To read in data for a 3-dimensional array, that will match the one defined in the following code<p>
<dl compact><dt><b>Example</b></dt><dd><div class="fragment"><pre class="fragment">  <a class="code" href="class_array.html">Array&lt; double &gt;</a> test( 2, 2, 4 );

  test( 0, 0, 0 ) = 1.;
  test( 0, 0, 1 ) = 2.;
  test( 0, 0, 2 ) = 3.;
  test( 0, 0, 3 ) = 4.;
  test( 0, 1, 0 ) = 5.;
  test( 0, 1, 1 ) = 6.;
  test( 0, 1, 2 ) = 7.;
  test( 0, 1, 3 ) = 8.;
  test( 1, 0, 0 ) = 9.;
  test( 1, 0, 1 ) = 10.;
  test( 1, 0, 2 ) = 11.;
  test( 1, 0, 3 ) = 12.;
  test( 1, 1, 0 ) = 13.;
  test( 1, 1, 1 ) = 14.;
  test( 1, 1, 2 ) = 15.;
  test( 1, 1, 3 ) = 16.;
</pre></div></dd></dl>
the data read in must have the following format: <br>
<p>
<img class="formulaInl" alt="$ \mbox{\ }\\ \noindent (((1.\mbox{\ }2.\mbox{\ }3.\mbox{\ }4.)(5.\mbox{\ }6.\mbox{\ }7.\mbox{\ }8.))((9.\mbox{\ }10.\mbox{\ }11.\mbox{\ }12.)(13.\mbox{\ }14.\mbox{\ }15.\mbox{\ }16.))) $" src="form_8.png"><p>
The function is error tolerant, i.e. if you use a separator that is not the whitespace character, then two separators without any value between them will cause the function to insert the infinity value. The same occurs if a nonempty <em>beginRecord</em> string is directly followed by a separator (not the whitespace character). <br>
 So using the <em>beginRecord</em> and the <em>endRecord</em> strings from above and the comma as separator, the input "\f$(,,,)\f$" will result in an one-dimensional array with the values "\f$inf\mbox{\ }inf\mbox{\ }inf\mbox{\ }inf\f$". <br>
 Different numbers of values in the same dimension and <em>beginRecord</em> strings not ended by <em>endRecord</em> strings will be recognized and bring the function to exit with a corresponding error message.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arr</em>&nbsp;</td><td>the array whose content will be read from <em>is</em> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>seek</em>&nbsp;</td><td>must be set to "true" if you want to read data with the prefix "Array&lt; type &gt;(dimensions)" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is</em>&nbsp;</td><td>the input stream from which the arrays content is read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>beginRecord</em>&nbsp;</td><td>the string that marks the beginning of a new record (= subdimension of the array). This string is empty by default (this means you can only read in one- or 2-dimensional arrays when using unformatted input data) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>endRecord</em>&nbsp;</td><td>the string that marks the end of the data of each subdimension, the default is the newline character </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>beginComment</em>&nbsp;</td><td>marks the beginning of a comment, the default is the semicolon </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>endComment</em>&nbsp;</td><td>marks the end of a comment, the default is a newline </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>separator</em>&nbsp;</td><td>contains all single characters that will separate single array values. By default the whitspace character and the comma can be used as separators </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dimensions</em>&nbsp;</td><td>can be used to specify the structure of the array data. Each position indicates the size of one array dimension. By default this vector is set empty and not used </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>"-2" - the parameter strings are not valid, "-1" - the data read has a wrong format, "0" - data for the array was successfully read </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classcheck__exception.html">check_exception</a></em>&nbsp;</td><td>the type of the exception is "range check error" and indicates that the given dimension sizes in <em>dimensions</em> or the dimensions implicitly given by the data prefix "Array&lt;...&gt;(...)" do not correspond to the number of array values read from <em>is</em> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Author:</b></dt><dd>M. Kreutz </dd></dl>
<dl compact><dt><b>Date:</b></dt><dd>1995</dd></dl>
<dl compact><dt><b>Changes</b></dt><dd>2002-03-20, ra: method <a class="el" href="_read_array_8cpp.html#ff3143e51aa23a9e3ea2360ca2051887">readArray()</a> didn't work for seek = true, when using explicit specification of array type and dimensions - fixed!</dd></dl>
<dl compact><dt><b>Status</b></dt><dd>stable </dd></dl>

<p>
Definition at line <a class="el" href="_read_array_8cpp-source.html#l00438">438</a> of file <a class="el" href="_read_array_8cpp-source.html">ReadArray.cpp</a>.
<p>
References <a class="el" href="_array_8h-source.html#l01793">Array&lt; T &gt;::elem()</a>, <a class="el" href="_array_8h-source.html#l00295">ArrayBase::nelem()</a>, and <a class="el" href="_array_8h-source.html#l00366">ArrayBase::resize()</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Dec 16 13:06:17 2009 for Array by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
