<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ReClaM: EarlyStopping.cpp Source File</title>
<link href="ReClaM.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>EarlyStopping.cpp</h1><a href="_early_stopping_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//===========================================================================</span>
<a name="l00079"></a>00079 <span class="comment"></span><span class="comment">//===========================================================================</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="preprocessor">#include "<a class="code" href="_early_stopping_8h.html">ReClaM/EarlyStopping.h</a>"</span>
<a name="l00083"></a>00083 <span class="preprocessor">#ifndef __SOLARIS__</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#else</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#include &lt;values.h&gt;</span>
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 <span class="comment">//===========================================================================</span>
<a name="l00111"></a><a class="code" href="class_early_stopping.html#cc73e2caf665b83146aac26c2992d830">00111</a> <span class="comment"></span><a class="code" href="class_early_stopping.html#cc73e2caf665b83146aac26c2992d830">EarlyStopping::EarlyStopping</a>(<span class="keywordtype">unsigned</span> sl = 5) { 
<a name="l00112"></a>00112   GLvalue     = 0;
<a name="l00113"></a>00113 <span class="preprocessor">#ifndef __SOLARIS__</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>  e_opt       = std::numeric_limits&lt; double &gt;::max( );
<a name="l00115"></a>00115   e_va_old    = std::numeric_limits&lt; double &gt;::max( );
<a name="l00116"></a>00116 <span class="preprocessor">#else</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>  e_opt       = MAXDOUBLE;
<a name="l00118"></a>00118   e_va_old    = MAXDOUBLE;
<a name="l00119"></a>00119 <span class="preprocessor">#endif</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>  time        = 0;
<a name="l00121"></a>00121   UPvalue     = 0;
<a name="l00122"></a>00122   striplength = sl;
<a name="l00123"></a>00123   e_tr.resize(striplength);
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">//===========================================================================</span>
<a name="l00151"></a><a class="code" href="class_early_stopping.html#e0ab11f0338f646f578a1f7817f9ca26">00151</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_early_stopping.html#e0ab11f0338f646f578a1f7817f9ca26">EarlyStopping::update</a>(<span class="keywordtype">double</span> e, <span class="keywordtype">double</span> e_va)
<a name="l00152"></a>00152 { 
<a name="l00153"></a>00153   <span class="keywordtype">double</span> e_tr_av,   <span class="comment">// Average training set error.</span>
<a name="l00154"></a>00154          e_tr_min;  <span class="comment">// Minimal training set error.</span>
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157   <span class="comment">// evaluate generalization loss: GL</span>
<a name="l00158"></a>00158   <span class="keywordflow">if</span> (e_va &lt; e_opt) 
<a name="l00159"></a>00159     e_opt = e_va;
<a name="l00160"></a>00160   GLvalue = 100. * (e_va/e_opt - 1.);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="comment">// evaluate trainings-progress: TP</span>
<a name="l00163"></a>00163   <span class="keywordflow">if</span>(time == 0) e_tr = e; <span class="comment">// initialize error memory vector with first </span>
<a name="l00164"></a>00164                           <span class="comment">// error value</span>
<a name="l00165"></a>00165                           <span class="comment">// this implies a TPvalue == 1 when time == 0</span>
<a name="l00166"></a>00166                           <span class="comment">// this does not affect the TP(), see below</span>
<a name="l00167"></a>00167   e_tr(time % striplength) = e;
<a name="l00168"></a>00168   e_tr_av = e_tr_min = e_tr(0);
<a name="l00169"></a>00169   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 1; j &lt; striplength; j++) {
<a name="l00170"></a>00170     e_tr_av += e_tr(j);
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (e_tr(j) &lt; e_tr_min)
<a name="l00172"></a>00172       e_tr_min = e_tr(j);
<a name="l00173"></a>00173   } 
<a name="l00174"></a>00174   e_tr_av /= (double)striplength;
<a name="l00175"></a>00175   TPvalue = 1000. * (e_tr_av / e_tr_min - 1.);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="comment">// evaluate increase of generalization error: UP</span>
<a name="l00178"></a>00178   <span class="keywordflow">if</span>(time % striplength == 0){
<a name="l00179"></a>00179     <span class="keywordflow">if</span> (e_va_old &lt; e_va)
<a name="l00180"></a>00180       UPvalue++;
<a name="l00181"></a>00181     <span class="keywordflow">else</span> 
<a name="l00182"></a>00182       UPvalue=0;
<a name="l00183"></a>00183     e_va_old=e_va;
<a name="l00184"></a>00184   }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">// update time</span>
<a name="l00187"></a>00187   time++;
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="comment">//===========================================================================</span>
<a name="l00207"></a><a class="code" href="class_early_stopping.html#f486e26b4100c909c8e330f892210698">00207</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="class_early_stopping.html#f486e26b4100c909c8e330f892210698">EarlyStopping::getGL</a>(){
<a name="l00208"></a>00208   <span class="keywordflow">return</span> GLvalue; 
<a name="l00209"></a>00209 }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="comment">//===========================================================================</span>
<a name="l00233"></a><a class="code" href="class_early_stopping.html#ef7b236af7d24f5e9dbb67f34784f4cc">00233</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="class_early_stopping.html#ef7b236af7d24f5e9dbb67f34784f4cc">EarlyStopping::getTP</a>(){
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (time &gt;= striplength)
<a name="l00235"></a>00235     <span class="keywordflow">return</span> TPvalue; 
<a name="l00236"></a>00236   <span class="keywordflow">else</span>
<a name="l00237"></a>00237 <span class="preprocessor">#ifndef __SOLARIS__</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>    <span class="keywordflow">return</span> std::numeric_limits&lt; double &gt;::max( );
<a name="l00239"></a>00239 <span class="preprocessor">#else</span>
<a name="l00240"></a>00240 <span class="preprocessor"></span>    <span class="keywordflow">return</span> MAXDOUBLE;
<a name="l00241"></a>00241 <span class="preprocessor">#endif</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>}
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="comment">//===========================================================================</span>
<a name="l00265"></a><a class="code" href="class_early_stopping.html#318717b91f6d55cfe6d029565b942ddd">00265</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="class_early_stopping.html#318717b91f6d55cfe6d029565b942ddd">EarlyStopping::getPQ</a>(){
<a name="l00266"></a>00266   <span class="keywordflow">if</span> (time &gt;= striplength) 
<a name="l00267"></a>00267     <span class="keywordflow">return</span> GLvalue/TPvalue;
<a name="l00268"></a>00268   <span class="keywordflow">else</span>
<a name="l00269"></a>00269     <span class="keywordflow">return</span> 0.;
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="comment">//===========================================================================</span>
<a name="l00289"></a><a class="code" href="class_early_stopping.html#16c057c871496d15102ddb84ed85093c">00289</a> <span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="class_early_stopping.html#16c057c871496d15102ddb84ed85093c">EarlyStopping::getUP</a>(){
<a name="l00290"></a>00290   <span class="keywordflow">return</span> UPvalue;
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">//===========================================================================</span>
<a name="l00314"></a><a class="code" href="class_early_stopping.html#ae6caff0a2a04623602827a38d54ae4a">00314</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="class_early_stopping.html#fcdac5f8acac916e1e5542b2c4376003">EarlyStopping::GL</a>(<span class="keywordtype">double</span> <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a> = 1.0) { 
<a name="l00315"></a>00315     <span class="keywordflow">return</span> (GLvalue &gt; <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a>);
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="comment">//===========================================================================</span>
<a name="l00344"></a><a class="code" href="class_early_stopping.html#c697add4f837e5aa78c634d72d0692f3">00344</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="class_early_stopping.html#dd2c4d471a1a53ddd5ac655b33b1d775">EarlyStopping::TP</a>(<span class="keywordtype">double</span> <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a> = 0.1) {
<a name="l00345"></a>00345   <span class="keywordflow">if</span> (time &gt;= striplength)
<a name="l00346"></a>00346     <span class="keywordflow">return</span> (TPvalue &lt; <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a>);
<a name="l00347"></a>00347   <span class="keywordflow">else</span> 
<a name="l00348"></a>00348     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 <span class="comment">//===========================================================================</span>
<a name="l00376"></a><a class="code" href="class_early_stopping.html#fce228c250ed9823e26d1b822553b007">00376</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="class_early_stopping.html#644da54ca9f5fab89dc532231d82ddbf">EarlyStopping::PQ</a>(<span class="keywordtype">double</span> <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a> = 0.5) {
<a name="l00377"></a>00377   <span class="keywordflow">if</span> (time &gt;= striplength)  
<a name="l00378"></a>00378     <span class="keywordflow">return</span> (GLvalue/TPvalue &gt; <a class="code" href="_adp_b_p_8h.html#ba5c1448179c5407d1e880bf71a7c67a">alpha</a>);
<a name="l00379"></a>00379   <span class="keywordflow">else</span> 
<a name="l00380"></a>00380     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00381"></a>00381 }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="comment">//===========================================================================</span>
<a name="l00404"></a><a class="code" href="class_early_stopping.html#303166d8575f35ec07e3e7d27ae6f93d">00404</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="class_early_stopping.html#50bd9a5cdd6e183f89e46959a7d283ae">EarlyStopping::UP</a>(<span class="keywordtype">unsigned</span> s=3){
<a name="l00405"></a>00405   <span class="keywordflow">return</span> (UPvalue&gt;=s);
<a name="l00406"></a>00406 }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="comment">//===========================================================================</span>
<a name="l00452"></a><a class="code" href="class_early_stopping.html#f2009f08cc7f8895319acd1a192dff67">00452</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="class_early_stopping.html#9f6ed95962c3c1b4e736492f3fbe7099">EarlyStopping::one_of_all</a>(<span class="keywordtype">double</span> alpha1=1.0, <span class="keywordtype">double</span> alpha2=1.0, <span class="keywordtype">double</span> alpha3=1.0, <span class="keywordtype">unsigned</span> s=3){
<a name="l00453"></a>00453   <span class="keywordflow">return</span> (<a class="code" href="class_early_stopping.html#fcdac5f8acac916e1e5542b2c4376003">GL</a>(alpha1) || <a class="code" href="class_early_stopping.html#dd2c4d471a1a53ddd5ac655b33b1d775">TP</a>(alpha2) || <a class="code" href="class_early_stopping.html#644da54ca9f5fab89dc532231d82ddbf">PQ</a>(alpha3) || <a class="code" href="class_early_stopping.html#50bd9a5cdd6e183f89e46959a7d283ae">UP</a>(s));
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 16 13:07:16 2009 for ReClaM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
