<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Dyn_alloc.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a></div>
<h1>Dyn_alloc.h</h1><div class="fragment"><pre class="fragment">00001 
00018 <span class="preprocessor">#ifdef DOLD_ALLOC</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#ifndef DS_ALLOC_OLD</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define DS_ALLOC_OLD</span>
00021 <span class="preprocessor"></span>
00033 <span class="preprocessor">#include &lt;iostream&gt;</span>
00034 <span class="preprocessor">#include "vec.h"</span>
00035 <span class="preprocessor">#include "cppmat.h"</span>
00036 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00037 <span class="preprocessor">#include &lt;string&gt;</span>
00038 <span class="comment">//#include &lt;new&gt;</span>
00039 
00040 
00041 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00042 <span class="keywordtype">void</span> new_array(T *&amp;myptr, <span class="keywordtype">int</span> size) {
00043   myptr = <span class="keyword">new</span> T[size]; 
00044   <span class="keywordflow">if</span> (myptr == NULL) {
00045     cerr &lt;&lt; <span class="stringliteral">"New Array memory allocation failed."</span>
00046          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00047     exit(1);
00048   } <span class="comment">// if</span>
00049   <span class="comment">//bzero(myptr, sizeof(T));</span>
00050 } <span class="comment">// new_array</span>
00051 
00052 
00053 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00054 <span class="keywordtype">void</span> new_Vector(Vector&lt;T&gt; *&amp; myptr, <span class="keywordtype">long</span> dim) {
00055   myptr = <span class="keyword">new</span> Vector&lt;T&gt;(dim, T(0.0));
00056   <span class="keywordflow">if</span> (myptr == NULL) {
00057     cerr &lt;&lt; <span class="stringliteral">"New Vector memory allocation failed."</span>
00058          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00059     exit(1);
00060   } <span class="comment">// if</span>
00061 } <span class="comment">//new_Vector</span>
00062 
00063 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00064 <span class="keywordtype">void</span> new_Vector_Init(Vector&lt;T&gt; *&amp; myptr, <span class="keyword">const</span> Vector&lt;T&gt; &amp; Holder) {
00065   myptr = <span class="keyword">new</span> Vector&lt;T&gt;(Holder);
00066   <span class="keywordflow">if</span> (myptr == NULL) {
00067     cerr &lt;&lt; <span class="stringliteral">"New Vector memory allocation failed."</span>
00068          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00069     exit(1);
00070   } <span class="comment">// if</span>
00071 } <span class="comment">//new_Vector</span>
00072 
00073 
00074 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00075 <span class="keywordtype">void</span> new_Matrix(Matrix&lt;T&gt; *&amp; myptr, <span class="keywordtype">long</span> dim1, <span class="keywordtype">long</span> dim2) {
00076   myptr = <span class="keyword">new</span> Matrix&lt;T&gt;(dim1, dim2, T(0.0));
00077   <span class="keywordflow">if</span> (myptr == NULL) {
00078     cerr &lt;&lt; <span class="stringliteral">"New Matrix memory allocation failed."</span>
00079          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00080     exit(1);
00081   } <span class="comment">// if</span>
00082 } <span class="comment">//new_Matrix</span>
00083 
00084 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00085 <span class="keywordtype">void</span> new_Matrix_Init(Matrix&lt;T&gt; *&amp; myptr, <span class="keyword">const</span> Matrix&lt;T&gt; &amp; Holder) {
00086   myptr = <span class="keyword">new</span> Matrix&lt;T&gt;(Holder);
00087   <span class="keywordflow">if</span> (myptr == NULL) {
00088     cerr &lt;&lt; <span class="stringliteral">"New Matrix memory allocation failed."</span>
00089          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00090     exit(1);
00091   } <span class="comment">// if</span>
00092 } <span class="comment">//new_Matrix</span>
00093 
00094 <span class="preprocessor">#endif</span>
00095 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00096 <span class="preprocessor"></span><span class="comment">/*  Allocators for ANSI Standard-compliant compilers.   </span>
00097 <span class="comment"> </span>
00098 <span class="comment">    Contains templates for dynamic allocation of Vectors, Matrices, and arrays.</span>
00099 <span class="comment">    For use with DirectSearch and its derived classes.  Note that the methods</span>
00100 <span class="comment">    defined in this header file use the try/catch syntax of the new ANSI C++ standard. </span>
00101 <span class="comment">    Note that the array allocator method allocates an uninitialized array.</span>
00102 <span class="comment">    new_Vector_Init and new_Matrix_Init allocate memory and initialize</span>
00103 <span class="comment">    it to user-specified values.</span>
00104 <span class="comment"></span>
00105 <span class="comment">    If you are using an old compiler that does not support this standard, change </span>
00106 <span class="comment">    #include "Dyn_alloc.h" to #include "Dyn_alloc_old.h" and compile with </span>
00107 <span class="comment">    Dyn_alloc_old.h.</span>
00108 <span class="comment">    </span>
00109 <span class="comment">    Anne Shepherd, College of William and Mary</span>
00110 <span class="comment"></span>
00111 <span class="comment">*/</span>
00112 
00113 <span class="preprocessor">#ifndef DS_NEW_ALLOC</span>
00114 <span class="preprocessor"></span><span class="preprocessor">#define DS_NEW_ALLOC</span>
00115 <span class="preprocessor"></span>
00116 <span class="preprocessor">#include &lt;iostream&gt;</span>
00117 <span class="preprocessor">#include "vec.h"</span>
00118 <span class="preprocessor">#include "cppmat.h"</span>
00119 <span class="preprocessor">#include &lt;new&gt;</span>
00120 
00143 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00144 <span class="keywordtype">void</span> new_array(T *&amp;myptr, <span class="keywordtype">long</span> size) {
00145     <span class="keywordflow">try</span>{
00146       myptr = <span class="keyword">new</span> T[size]; 
00147     } <span class="comment">//try</span>
00148     <span class="keywordflow">catch</span> ( bad_alloc exception ) {      
00149         cerr &lt;&lt; <span class="stringliteral">"Memory allocation failed in new_Array."</span>
00150              &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00151         exit(1);
00152     } <span class="comment">//catch</span>
00153     <span class="keywordflow">for</span>(<span class="keywordtype">long</span> i = 0; i &lt; size; i++) {
00154       myptr[i] = (T)(0);
00155     } <span class="comment">// for</span>
00156 } <span class="comment">// new_array</span>
00157 
00165 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00166 <span class="keywordtype">void</span> new_Vector(Vector&lt;T&gt; *&amp; myptr, <span class="keywordtype">long</span> dim) {
00167   <span class="keywordflow">try</span>{
00168     myptr = <span class="keyword">new</span> Vector&lt;T&gt;(dim, T(0.0));
00169   } <span class="comment">//try</span>
00170   <span class="keywordflow">catch</span> ( bad_alloc exception ) {
00171     cerr &lt;&lt; <span class="stringliteral">"Memory allocation failed in new_Vector."</span>
00172          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00173     exit(1);
00174   } <span class="comment">//catch</span>
00175 } <span class="comment">//new_Vector</span>
00176 
00184 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00185 <span class="keywordtype">void</span> new_Vector_Init(Vector&lt;T&gt; *&amp; myptr, <span class="keyword">const</span> Vector&lt;T&gt; &amp; Holder) {
00186   <span class="keywordflow">try</span>{
00187     myptr = <span class="keyword">new</span> Vector&lt;T&gt;(Holder);
00188   } <span class="comment">//try</span>
00189   <span class="keywordflow">catch</span> ( bad_alloc exception ) {
00190     cerr &lt;&lt; <span class="stringliteral">"Memory allocation failed in new_Vector_Init."</span>
00191          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00192     exit(1);
00193   } <span class="comment">//catch</span>
00194 } <span class="comment">//new_Vector</span>
00195 
00196 
00205 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00206 <span class="keywordtype">void</span> new_Matrix(Matrix&lt;T&gt; *&amp; myptr, <span class="keywordtype">long</span> dim1, <span class="keywordtype">long</span> dim2) {
00207   <span class="keywordflow">try</span>{
00208     myptr = <span class="keyword">new</span> Matrix&lt;T&gt;(dim1, dim2, T(0.0));
00209   } <span class="comment">//try</span>
00210   <span class="keywordflow">catch</span> ( bad_alloc exception ) {      
00211     cerr &lt;&lt; <span class="stringliteral">"Memory allocation failed in new_Matrix."</span>
00212          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00213     exit(1);
00214   } <span class="comment">//catch</span>
00215 } <span class="comment">//new_Matrix</span>
00216 
00224 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00225 <span class="keywordtype">void</span> new_Matrix_Init(Matrix&lt;T&gt; *&amp; myptr, <span class="keyword">const</span> Matrix&lt;T&gt; &amp; Holder) {
00226   <span class="keywordflow">try</span>{
00227     myptr = <span class="keyword">new</span> Matrix&lt;T&gt;(Holder);
00228   } <span class="comment">//try</span>
00229   <span class="keywordflow">catch</span> ( bad_alloc exception ) {      
00230     cerr &lt;&lt; <span class="stringliteral">"Memory allocation failed in new_Matrix_Init."</span>
00231          &lt;&lt; <span class="stringliteral">"Exiting with value 1.\n"</span>;
00232     exit(1);
00233   } <span class="comment">//catch</span>
00234 } <span class="comment">//new_Matrix</span>
00236 <span class="comment"></span><span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Sep 25 17:37:40 2007 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
